doctype html

<!-- @if production=false -->
html
<!-- @endif -->

<!-- @if production=true -->
html(manifest="offline/cache.appcache")
<!-- @endif -->

    head
        
        meta(charset="UTF-8")

        title
     
        link(rel="shortcut icon", href="images/favicon_256x256.png", type="image/png")

        <!-- @if production=false -->
        // Top JS

        script(src="js_vendor/jquery.js")
        script(src="js_vendor/jquery-ui.js")
        script(src="js_vendor/leaflet-src.js")
        script(src="js_vendor/FileSaver.js")
        script(src="js_vendor/base64.js ")
        script(src="js_vendor/pouchdb.js")
        script(src="js_vendor/jquery.noty.js")
        script(src="js_vendor/jquery.noty.bottomRight.js")
        script(src="js_vendor/bootstrap-tagsinput.js")
        script(src="js_vendor/hammer.js")
        script(src="js_vendor/jquery.hammer.js")
        script(src="js_vendor/leaflet.measure.js")
        script(src="js_vendor/jquery.arcticmodal-0.3.min.js")
        script(src="js_vendor/modernizr.js")
        script(src="js_vendor/shortcut.js")
        script(src="js_vendor/leaflet.markercluster-src.js")
        script(src="js_vendor/moment-with-langs.js")
        script(src="js_vendor/ckeditor/ckeditor.js")
        script(src="js_vendor/jquery.dataTables.min.js")
        script(src="js_vendor/jquery.datetimepicker.js")
        script(src="js_vendor/leaflet.label-src.js")
        script(src="js_vendor/dataTables.foundation.js")

        // CSS    
        
        link(href="css_vendor/leaflet.css", rel="stylesheet")
        link(href="css_vendor/jquery-ui.css", rel="stylesheet")
        link(href="css_vendor/leaflet.measure.css", rel="stylesheet")
        link(href="css_vendor/jquery.arcticmodal-0.3.css", rel="stylesheet")
        link(href="css_vendor/foundation.css", rel="stylesheet")
        link(href="css_vendor/normalize.css", rel="stylesheet")
        link(href="css_vendor/animate.css", rel="stylesheet")
        link(href="css_vendor/MarkerCluster.Default.css", rel="stylesheet")
        link(href="css_vendor/jquery.dataTables.css", rel="stylesheet")
        link(href="css_vendor/jquery.datetimepicker.css", rel="stylesheet")
        link(href="css_vendor/leaflet.label.css", rel="stylesheet")
        link(href="css_vendor/dataTables.foundation.css", rel="stylesheet")

        link(href="css/starik.kartofan.main.css", rel="stylesheet")
        link(href="css/starik.kartofan.fonts.css", rel="stylesheet")
        <!-- @endif -->

        <!-- @if production=true -->

        script(src="top.js")
        link(href="vendor.css", rel="stylesheet")
        link(href="app.css", rel="stylesheet")

        <!-- @endif -->

    body

        // LOADER
        div#kf_loader(style="font: 30px fantasy !important; text-align: center;")
            h1 Loading... about 2MB. Be patient it`s dev version.
            h1 Загружается... около 2Мб. Будьте терпеливы это же тестовая версия.

        table#kf_mainLayout.hide
            thead: tr: td(colspan=3)#kf_topMenu:  include jade/topMenu
            tfoot: tr: td(colspan=3)#kf_infoMenu: include jade/infoMenu
            tbody
                tr
                    td#kf_leftMenu
                    td#kf_mapsContainer: //Dynamicaly generate in Stage object
                    td#kf_rightMenu


        div#updatesInfo.hide
        div#hotkeysInfo.hide
        div#markerDescription.hide
        canvas#exportView.hide
        canvas#cutterView.hide
        //a#canvasDownload

        div#formRawJSON.foundationForm.hide
            div.box-modal
                form(data-abide)
                    div.row 
                        div.small-11.columns.small-centered: textarea.formRawJSON_rawJSON

                    div.row.center
                        div.small-6.columns.text-right: a.small.button.formRawJSON_submit Send 
                        div.small-6.columns.text-left: a.small.button.formRawJSON_cancel Cancel 

        div#fastNotes.hide
            textarea#fastNotes_textarea

        div#markersTable.hide
            table#markersTable_table
                thead
                    tr
                        th
                        th
                        th
                        th
                        th
                        th
                        th
                        th
                        th
                tbody
                    tr
                        td
                        td
                        td
                        td
                        td
                        td
                        td
                        td
                        td

        // Table Of Markers Column Selector
        div#markersTable_columnsSelect.foundationForm.hide
            div.box-modal
                form(data-abide)

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_title Title
                        div.small-2.columns: input.markersTable_columnsSelect_title.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_tags Tags
                        div.small-2.columns: input.markersTable_columnsSelect_tags.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_icon Icon
                        div.small-2.columns: input.markersTable_columnsSelect_icon.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_layer Layer
                        div.small-2.columns: input.markersTable_columnsSelect_layer.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_dateStart DateStart
                        div.small-2.columns: input.markersTable_columnsSelect_dateStart.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_dateEnd DateEnd
                        div.small-2.columns: input.markersTable_columnsSelect_dateEnd.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_links Links
                        div.small-2.columns: input.markersTable_columnsSelect_links.text-center(type="checkbox")  

                    div.row.collapse 
                        div.small-10.columns: span.prefix.markersTable_columnsSelect_latlng Latlng
                        div.small-2.columns: input.markersTable_columnsSelect_latlng.text-center(type="checkbox") 

                    div.row.collapse 
                        div.small-12.small-centered.columns.text-center: a.small.button.markersTable_columnsSelect_submit Submit

        // Form Edit Map Info
        div#formEditMap.foundationForm.hide
            div.box-modal
                form(data-abide)
                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_id ID
                        div.small-9.columns: input.formEditMap_id(type="text", required)

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_title Title
                        div.small-9.columns: input.formEditMap_title(type="text", required)

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_server Server
                        div.small-9.columns: select.formEditMap_server

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMap_layers Layers
                        div.small-9.columns: input.formEditMap_layers(type="text")

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMap_group Group
                        div.small-9.columns: input.formEditMap_group(type="text")

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_src Source
                        div.small-9.columns: select.formEditMap_src

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_crs CRS
                        div.small-9.columns: select.formEditMap_crs

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_tilesURL Tiles URL
                        div.small-9.columns: textarea.formEditMap_tilesURL(required)

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMap_maxZoom maxZoom
                        div.small-9.columns: input.formEditMap_maxZoom(type="text", required, pattern="^1?\\d$|^20$")

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_minZoom minZoom
                        div.small-9.columns: input.formEditMap_minZoom(type="text", required, pattern="^1?\\d$|^20$")

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMap_startZoom startZoom
                        div.small-9.columns: input.formEditMap_startZoom(type="text", required, pattern="^1?\\d$|^20$")

                    div.row.collapse 
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditMap_submit Submit
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditMap_delete Delete
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditMap_cancel Cancel

        // Form Edit Stage
        div#formEditStage.foundationForm.hide
            div.box-modal
                form(data-abide)
                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditStage_id ID
                        div.small-9.columns: input.formEditStage_id(type="text", required)

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditStage_title Title
                        div.small-9.columns: input.formEditStage_title(type="text", required)

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditStage_group Group
                        div.small-9.columns: input.formEditStage_group(type="text")

                    div.row.collapse 
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditStage_submit Submit
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditStage_delete Delete
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditStage_cancel Cancel

        // Form Edit Stage Controls
        div#formEditStage_editMapsControls.foundationForm.hide
            div.box-modal
                form(data-abide)
                    div.row.collapse 
                        div.small-10.columns: span.prefix.formEditStage_editMapsControls_zoom Zoom Control
                        div.small-2.columns: input.formEditStage_editMapsControls_zoom.text-center(type="checkbox")

                    div.row.collapse 
                        div.small-10.columns: span.prefix.formEditStage_editMapsControls_scale Scale Control
                        div.small-2.columns: input.formEditStage_editMapsControls_scale(type="checkbox")

                    div.row.collapse 
                        div.small-10.columns: span.prefix.formEditStage_editMapsControls_infoCopyright Copyright Info
                        div.small-2.columns: input.formEditStage_editMapsControls_infoCopyright(type="checkbox")

                    div.row.collapse 
                        div.small-10.columns: span.prefix.formEditStage_editMapsControls_mapTitle Title Info
                        div.small-2.columns: input.formEditStage_editMapsControls_mapTitle(type="checkbox")

                   div.row.collapse 
                        div.small-10.columns: span.prefix.formEditStage_editMapsControls_zoomLevel ZoomLevel Info
                        div.small-2.columns: input.formEditStage_editMapsControls_zoomLevel(type="checkbox")                        

                    div.row.collapse 
                        div.small-12.medium-6.columns.text-center: a.small.button.formEditStage_submit Submit
                        div.small-12.medium-6.columns.text-center: a.small.button.formEditStage_cancel Cancel

        // Form Edit Fast Moving
        div#formEditPoint.foundationForm.hide
            div.box-modal
                form(data-abide)
                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditPoint_id ID
                        div.small-9.columns: input.formEditPoint_id(type="text", required)

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditPoint_title Title
                        div.small-9.columns: input.formEditPoint_title(type="text", required)

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditPoint_latlng LatLng
                        div.small-9.columns: input.formEditPoint_latlng(type="text", required, pattern="^\\d+\\.\\d+,\\d+\\.\\d+$")

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditPoint_group Group
                        div.small-9.columns: input.formEditPoint_group(type="text")

                    div.row.collapse 
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditPoint_submit Submit
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditPoint_delete Delete
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditPoint_cancel Cancel

        // Form Edit Marker
        div#formEditMarker.foundationForm.hide
            div.box-modal
                form(data-abide)
                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMarker_id ID
                        div.small-9.columns: input.formEditMarker_id(type="text", required, readonly)

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMarker_title Title
                        div.small-9.columns: input.formEditMarker_title(type="text", required)

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMarker_icon Icon
                        div.small-9.columns
                            input#formEditMarker_iconSrc.hide.formEditMarker_icon(type="text")
                            div.panel#formEditMarker_iconsPanel

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMarker_tags Tags
                        div.small-9.columns
                            // String with all tags
                            input#formEditMarker_tagsSrc.hide.formEditMarker_tags(type="text")
                            // Panel with tags buttons
                            div.panel#formEditMarker_tagsPanel
                            // Add tag section
                            div.row.collapse
                                div.small-10.columns: input.formEditMarker_tagsAddInput#formEditMarker_tagsAddInput(type="text")
                                div.small-2.columns: a.button.tiny.postfix.nomargin#formEditMarker_tagsAddButton +

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMarker_layer Layer
                        div.small-9.columns: input.formEditMarker_layer(type="text")

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMarker_description Description
                        div.small-9.columns
                            div.row.collapse
                                div.small-10.columns: textarea.formEditMarker_description#formEditMarker_description
                                div.small-2.columns: a.button.tiny.postfix.nomargin.formEditMarker_descriptionHTMLAddButton: span.formEditMarker_descriptionHTMLAddButton +HTML

                    div.row.collapse.hide#descriptionHTMLRow
                        div.small-3.columns: span.prefix.formEditMarker_descriptionHTML Description HTML
                        div.small-9.columns: textarea.formEditMarker_descriptionHTML#formEditMarker_descriptionHTML

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMarker_links Links
                        div.small-9.columns: textarea.formEditMarker_links                        

                    div.row.collapse
                        div.small-3.columns: span.prefix.formEditMarker_dateStart Date
                        div.small-9.columns
                            div.row.collapse
                                div.small-8.columns: input.formEditMarker_dateStart(type="text")
                                div.small-2.columns: a.button.tiny.postfix.nomargin.disabled.formEditMarker_dateStartAddTime: span.formEditMarker_dateStartAddTime +Time
                                div.small-2.columns: a.button.tiny.postfix.nomargin.formEditMarker_dateStartAddFinal: span.formEditMarker_dateStartAddFinal +End

                    div.row.collapse.hide#addDateFinalRow
                        div.small-3.columns: span.prefix.formEditMarker_dateEnd Date End
                        div.small-9.columns
                            div.row.collapse
                                div.small-8.columns: input.formEditMarker_dateEnd(type="text")
                                div.small-2.columns: a.button.tiny.postfix.nomargin.disabled.formEditMarker_dateEndAddTime: span.formEditMarker_dateEndAddTime +Time

                    div.row.collapse 
                        div.small-3.columns: span.prefix.formEditMarker_latlng Latlng
                        div.small-9.columns: input.formEditMarker_latlng(type="text", required)

                    div.row.collapse 
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditMarker_submit Submit
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditMarker_delete Delete
                        div.small-12.medium-4.columns.text-center: a.small.button.formEditMarker_cancel Cancel



        div#disqus_thread.hide
        |<script type="text/javascript">
        |    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        |    var disqus_shortname = 'kartofan'; // required: replace example with your forum shortname
    
        |    /* * * DON'T EDIT BELOW THIS LINE * * */
        |    (function() {
        |        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        |        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        |        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        |    })();
        |</script>
        //<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        //<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    


        <!-- @if production=false -->
        // Bottom JS

        script(src="js_vendor/foundation.min.js")
        script(src="js/jquery.noty.kartofan.js")

        script(src="js/starik.kartofan.fn.js")
        script(src="js/starik.kartofan.leaflet.js")
        script(src="js/starik.kartofan.options.js")
        script(src="js/starik.kartofan.stages.js")
        script(src="js/starik.kartofan.forms.js")
        script(src="js/starik.kartofan.tour.js")
        script(src="js/starik.kartofan.gps.js")
        script(src="js/starik.kartofan.markers.js")
        script(src="js/starik.kartofan.main.js")
        <!-- @endif -->

        <!-- @if production=true -->

        script(src="bottom.js")

        <!-- @endif -->

        |<!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter22770301 = new Ya.Metrika({id:22770301, webvisor:true, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/22770301" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->

        |<script>
        |(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        |(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        |m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        |})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        |ga('create', 'UA-38067250-2', 'kissr.com');
        |ga('send', 'pageview');
        |</script>
